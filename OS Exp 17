#include <stdio.h>

int main() {
    int alloc[3][3] = {{1,2,3},{2,0,1},{3,1,2}};
    int max[3][3]   = {{3,3,3},{3,2,2},{4,2,2}};
    int avail[3] = {3,2,2};
    int need[3][3], finish[3]={0}, seq[3], work[3], i,j,count=0;

    for(i=0;i<3;i++)
        for(j=0;j<3;j++)
            need[i][j]=max[i][j]-alloc[i][j];

    for(j=0;j<3;j++) work[j]=avail[j];

    for(i=0;i<3;i++){
        int ok=1;
        for(j=0;j<3;j++)
            if(need[i][j]>work[j]) ok=0;
        if(ok){
            for(j=0;j<3;j++) work[j]+=alloc[i][j];
            seq[count++]=i;
        }
    }

    if(count==3){
        printf("Safe sequence: ");
        for(i=0;i<3;i++) printf("P%d ",seq[i]);
    } else {
        printf("Deadlock may occur");
    }
}
